service: slack-send-messages-app

provider:
    name: aws
    runtime: nodejs6.10
    stage: dev
    region: us-east-1
    memorySize: 128
    versionFunctions: false
    cfLogs: true
    iamRoleStatements:
        - Effect: "Allow"
          Action:
              - "sqs:*"
              - "ses:SendEmail"
          Resource: "*"
package:
    exclude:
        - .npmignore
functions:
    schedule:
        handler: handler.scheduled_event
        description: Handle scheduled event
        timeout: 30
        events:
            - schedule:
                name: ${self:service}-${opt:stage, self:provider.stage}-every-5-mins
                description: Every 5 minutes
                rate: rate(5 minutes)
                enabled: false
            - http:
                path: slack/send/run
                method: get
                private: false
    command:
        handler: handler.slack_command
        description: Handle slash commands from Slack
        timeout: 30
        events:
            - http:
                path: slack/send/command
                method: post
                private: false
    event:
        handler: handler.slack_event
        description: Handle events from Slack
        timeout: 30
        events:
            - http:
                path: slack/send/event
                method: post
                private: false
resources:
    Resources:
        ScheduleLogGroup:
            Properties:
                RetentionInDays: "7"
        CommandLogGroup:
            Properties:
                RetentionInDays: "7"
        EventLogGroup:
            Properties:
                RetentionInDays: "7"
